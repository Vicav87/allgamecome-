<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev From Zero - Hardcore Biz</title>
    <style>
        :root {
            --neon: #00ffaa;
            --bg: #050508;
            --glass: rgba(20, 20, 30, 0.95);
            --text: #ffffff;
            --danger: #ff3e3e;
        }

        body {
            margin: 0; font-family: 'Inter', sans-serif;
            background: var(--bg); color: var(--text); padding: 15px;
        }

        #bgCanvas { position: fixed; top: 0; left: 0; z-index: -1; }

        header {
            max-width: 450px; margin: 0 auto 15px; padding: 15px;
            border-radius: 20px; background: var(--glass); border: 1px solid #222;
        }

        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .stat-card { background: rgba(255,255,255,0.03); padding: 8px; border-radius: 12px; text-align: center; }
        .stat-card b { color: var(--neon); font-size: 0.9rem; }
        .stat-card small { display: block; font-size: 0.55rem; color: #777; text-transform: uppercase; }

        .hype-banner {
            background: rgba(0, 255, 170, 0.05); border: 1px solid var(--neon);
            padding: 6px; border-radius: 10px; margin: 10px 0; text-align: center;
            font-size: 0.75rem; font-weight: bold; color: var(--neon);
        }

        /* MODAL DE CONTAS (ESTILO FATURA) */
        #billModal {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 85%; max-width: 380px; background: #0f0f1a; padding: 25px;
            border-radius: 20px; border: 1px solid var(--danger); z-index: 1000;
            box-shadow: 0 0 100px rgba(0,0,0,0.9);
        }

        nav.tabs { max-width: 450px; margin: 0 auto 10px; display: flex; gap: 5px; }
        .tab-btn { flex: 1; padding: 10px; border: none; border-radius: 12px; background: #1a1a25; color: #555; cursor: pointer; font-size: 0.8rem; }
        .tab-btn.active { background: var(--neon); color: #000; font-weight: bold; }

        main { max-width: 450px; margin: 0 auto; padding: 15px; border-radius: 20px; background: var(--glass); border: 1px solid #222; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .attr-card { background: rgba(0,0,0,0.3); padding: 10px; border-radius: 12px; margin-bottom: 8px; border: 1px solid #1a1a1a; }
        .attr-header { display: flex; justify-content: space-between; font-size: 0.75rem; margin-bottom: 5px; }
        
        .ctrl-btn { flex: 1; border: none; padding: 8px; border-radius: 8px; background: #222; color: #fff; cursor: pointer; }
        .ctrl-btn:active { background: var(--neon); color: #000; }
        
        .main-btn { width: 100%; padding: 15px; border: none; border-radius: 12px; background: var(--neon); color: #000; font-weight: 800; cursor: pointer; }
        .main-btn:disabled { background: #222; color: #444; }

        .upgrade-item { background: rgba(255,255,255,0.02); padding: 10px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        .buy-btn { background: #fff; border: none; padding: 6px 10px; border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 0.7rem; }
    </style>
</head>
<body>
    <canvas id="bgCanvas"></canvas>

    <div id="billModal">
        <h3 style="color:var(--danger); margin-top:0; text-align: center;">RELAT√ìRIO MENSAL üìâ</h3>
        <div id="billDetails" style="font-size: 0.85rem; font-family: monospace; background: #000; padding: 15px; border-radius: 10px; border: 1px solid #222;"></div>
        <button class="main-btn" onclick="payBills()" style="margin-top:20px; background: var(--danger); color: white;">CONFIRMAR PAGAMENTO</button>
    </div>

    <header>
        <div class="logo">DEV FROM ZERO <small style="font-size: 0.6rem; color: var(--danger);">HARDCORE</small></div>
        <div class="stats-grid">
            <div class="stat-card"><small>Caixa</small><b>$<span id="money">0</span></b></div>
            <div class="stat-card"><small>Dia</small><b><span id="dayCount">1</span>/10</b></div>
            <div class="stat-card"><small>N√≠vel</small><b><span id="level">1</span></b></div>
        </div>
        <div class="hype-banner">HYPE: <span id="hypeTag">---</span></div>
    </header>

    <nav class="tabs">
        <button onclick="showTab('dev')" class="tab-btn active" id="btn-dev">DESENVOLVIMENTO</button>
        <button onclick="showTab('office')" class="tab-btn" id="btn-office">UPGRADES</button>
    </nav>

    <main>
        <div id="dev" class="tab-content active">
            <div style="text-align: center; font-size: 0.65rem; color: #555; margin-bottom: 8px;">CAPACIDADE: <span id="currentPoints">0</span>/<span id="maxPoints">0</span></div>
            <div id="attrContainer"></div>
            <p style="font-size: 0.6rem; color: #444; text-align: center;">Custo de Lan√ßamento: $50 + Marketing</p>
            <button id="publishBtn" class="main-btn" onclick="publishGame()" disabled>LAN√áAR PROJETO</button>
        </div>

        <div id="office" class="tab-content">
            <div id="upgradeList"></div>
            <div style="text-align: center; margin-top: 15px;"><small onclick="resetGame()" style="color: #222; cursor: pointer;">Resetar Progress√£o</small></div>
        </div>
    </main>

    <script>
        let game = {
            money: 600, level: 1, xp: 0, xpNeeded: 100,
            day: 1, inventory: [],
            stats: { gameplay: 0, graphics: 0, story: 0, optimization: 0 },
            currentHype: 'gameplay'
        };

        const UPGRADES = [
            { id: "s1", name: "Estagi√°rio", cost: 500, level: 2, val: 10, salary: 250 },
            { id: "d1", name: "Escrit√≥rio", cost: 2500, level: 5, val: 1.5, salary: 800 },
            { id: "s2", name: "Dev Fullstack", cost: 12000, level: 12, val: 50, salary: 2500 },
            { id: "d2", name: "Est√∫dio Pro", cost: 45000, level: 25, val: 5.0, salary: 10000 }
        ];

        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('btn-'+id).classList.add('active');
        }

        function updateUI() {
            document.getElementById('money').innerText = Math.floor(game.money).toLocaleString();
            document.getElementById('dayCount').innerText = game.day;
            document.getElementById('level').innerText = game.level;
            document.getElementById('hypeTag').innerText = game.currentHype.toUpperCase();
            
            let bPoints = 0;
            UPGRADES.filter(u => game.inventory.includes(u.id) && u.salary < 1000).forEach(u => bPoints += u.val);
            if(game.inventory.includes("s2")) bPoints += 50;

            const max = 15 + (game.level * 4) + bPoints;
            const current = Object.values(game.stats).reduce((a, b) => a + b, 0);

            document.getElementById('currentPoints').innerText = current;
            document.getElementById('maxPoints').innerText = max;
            document.getElementById('publishBtn').disabled = (current === 0);

            renderAttributes(max, current);
            renderUpgrades();
            localStorage.setItem('DevZero_Hardcore', JSON.stringify(game));
        }

        function renderAttributes(max, current) {
            document.getElementById('attrContainer').innerHTML = Object.keys(game.stats).map(cat => `
                <div class="attr-card" style="border-right: 2px solid ${cat === game.currentHype ? 'var(--neon)' : 'transparent'}">
                    <div class="attr-header">${cat.toUpperCase()} <b>${game.stats[cat]}</b></div>
                    <div style="display:flex; gap:4px;">
                        <button class="ctrl-btn" onclick="mod('${cat}', 1, ${max}, ${current})">+1</button>
                        <button class="ctrl-btn" onclick="mod('${cat}', 5, ${max}, ${current})">+5</button>
                    </div>
                </div>
            `).join('');
        }

        function mod(k, v, m, c) { if(c + v <= m) game.stats[k] += v; updateUI(); }

        function renderUpgrades() {
            document.getElementById('upgradeList').innerHTML = UPGRADES.map(u => {
                const owned = game.inventory.includes(u.id);
                return `
                <div class="upgrade-item">
                    <div style="font-size:0.75rem"><b>${u.name}</b><br><small>Sal√°rio: $${u.salary}</small></div>
                    <button class="buy-btn" onclick="buy('${u.id}', ${u.cost})" ${owned || game.level < u.level ? 'disabled' : ''}>
                        ${owned ? 'ATIVO' : '$'+u.cost}
                    </button>
                </div>`;
            }).join('');
        }

        function buy(id, cost) { if(game.money >= cost) { game.money -= cost; game.inventory.push(id); updateUI(); } }

        function publishGame() {
            const vals = Object.values(game.stats);
            const total = vals.reduce((a, b) => a + b, 0);
            
            // Penalidade de Equil√≠brio (Aumentada)
            const avg = total / 4;
            let penalty = 1.0;
            vals.forEach(v => { if(v < avg * 0.5) penalty -= 0.2; });

            // Custo de lan√ßamento
            const launchCost = 50 + (total * 2);
            game.money -= launchCost;

            // Lucro
            let mMult = 1.0;
            if(game.inventory.includes("d1")) mMult = 1.5;
            if(game.inventory.includes("d2")) mMult = 5.0;

            const hypeBonus = (game.stats[game.currentHype] / total) > 0.4 ? 1.6 : 1.0;
            const profit = Math.floor((total * 20) * Math.max(0.1, penalty) * hypeBonus * mMult);
            
            game.money += profit;
            game.day++;
            game.currentHype = Object.keys(game.stats)[Math.floor(Math.random() * 4)];
            game.stats = { gameplay: 0, graphics: 0, story: 0, optimization: 0 };
            
            gainXP(total * 2);
            if(game.day > 10) showBills();
            else updateUI();
        }

        function showBills() {
            let fixed = 300; // Custo de vida subiu
            let payroll = 0;
            UPGRADES.filter(u => game.inventory.includes(u.id)).forEach(u => payroll += u.salary);
            
            let tax = Math.floor(game.money * 0.15); // Imposto de Riqueza
            if(game.money < 0) tax = 0;

            let total = fixed + payroll + tax;
            document.getElementById('billDetails').innerHTML = `
                FIXO: -$${fixed}<br>
                SAL√ÅRIOS: -$${payroll}<br>
                IMPOSTO (15%): -$${tax}<br>
                -------------------<br>
                D√âBITO TOTAL: $${total}
            `;
            document.getElementById('billModal').style.display = 'block';
            game.pendingBills = total;
        }

        function payBills() {
            game.money -= game.pendingBills;
            game.day = 1;
            document.getElementById('billModal').style.display = 'none';
            if(game.money < -500) { // Toler√¢ncia de d√≠vida curta
                alert("BANCO CENTRAL: Seu est√∫dio faliu por d√≠vidas acumuladas.");
                localStorage.clear(); location.reload();
            }
            updateUI();
        }

        function gainXP(v) {
            game.xp += v;
            if(game.xp >= game.xpNeeded) { game.level++; game.xp = 0; game.xpNeeded = Math.floor(game.xpNeeded * 1.5); }
        }

        function resetGame() { if(confirm("Zerar tudo?")) { localStorage.clear(); location.reload(); } }

        window.onload = () => {
            const saved = localStorage.getItem('DevZero_Hardcore');
            if(saved) game = JSON.parse(saved);
            updateUI();
        };
    </script>
</body>
</html>
