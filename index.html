<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev From Zero - Definitive Edition</title>
    <style>
        :root {
            --neon: #00ffaa;
            --bg: #050508;
            --glass: rgba(20, 20, 32, 0.96);
            --text: #ffffff;
            --danger: #ff4d6d;
            --warning: #ffcc00;
        }

        body {
            margin: 0; font-family: 'Inter', sans-serif;
            background: var(--bg); color: var(--text); padding: 15px;
            overflow-x: hidden;
        }

        #bgCanvas { position: fixed; top: 0; left: 0; z-index: -1; }

        /* SE√á√ïES SEPARADAS */
        header, nav, main {
            max-width: 460px; margin: 0 auto 12px auto;
            backdrop-filter: blur(10px);
        }

        header {
            padding: 20px; border-radius: 24px;
            background: var(--glass); border: 1px solid rgba(255,255,255,0.05);
        }

        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .stat-card { background: rgba(255,255,255,0.03); padding: 10px; border-radius: 15px; text-align: center; }
        .stat-card b { color: var(--neon); font-size: 0.9rem; }
        .stat-card small { display: block; font-size: 0.55rem; color: #777; text-transform: uppercase; }

        .hype-banner {
            background: rgba(0, 255, 170, 0.1); border: 1px solid var(--neon);
            padding: 8px; border-radius: 12px; margin: 15px 0; text-align: center;
            font-size: 0.75rem; font-weight: bold; color: var(--neon);
        }

        /* NAVEGA√á√ÉO */
        nav.tabs { display: flex; gap: 8px; }
        .tab-btn {
            flex: 1; padding: 12px; border: none; border-radius: 16px;
            background: var(--glass); color: #555; cursor: pointer; font-weight: bold;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .tab-btn.active { background: var(--neon); color: #000; }

        /* √ÅREA DE CONTE√öDO */
        main {
            padding: 20px; border-radius: 28px;
            background: var(--glass); border: 1px solid rgba(255,255,255,0.05);
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* CARDS DE ATRIBUTOS */
        .attr-card { background: rgba(0,0,0,0.3); padding: 12px; border-radius: 16px; margin-bottom: 10px; border: 1px solid #1a1a1a; }
        .attr-header { display: flex; justify-content: space-between; font-size: 0.75rem; margin-bottom: 8px; }
        .ctrl-btn { flex: 1; border: none; padding: 10px; border-radius: 10px; background: #14141f; color: #fff; cursor: pointer; border: 1px solid #333; }

        /* BOT√ïES PRINCIPAIS */
        .main-btn { width: 100%; padding: 18px; border: none; border-radius: 16px; background: var(--neon); color: #000; font-weight: 900; cursor: pointer; margin-bottom: 10px; }
        .main-btn:disabled { background: #222; color: #555; cursor: not-allowed; }

        .test-box { background: rgba(0,0,0,0.4); padding: 15px; border-radius: 18px; text-align: center; border: 1px dashed #333; margin-top: 10px; }
        .secondary-btn { width: 100%; padding: 10px; border: 1px solid var(--neon); background: transparent; color: var(--neon); border-radius: 12px; cursor: pointer; font-weight: bold; }

        /* UPGRADES */
        .upgrade-item { background: rgba(255,255,255,0.02); padding: 12px; border-radius: 15px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .buy-btn { background: #fff; border: none; padding: 8px 12px; border-radius: 8px; font-weight: bold; cursor: pointer; }

        /* MODAL DE CONTAS */
        #billModal {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 85%; max-width: 400px; background: #0a0a14; padding: 25px;
            border-radius: 24px; border: 2px solid var(--danger); z-index: 9999;
        }

        .log-entry { font-size: 0.7rem; padding: 10px; border-bottom: 1px solid #222; }
    </style>
</head>
<body>
    <canvas id="bgCanvas"></canvas>

    <div id="billModal">
        <h3 style="color:var(--danger); margin:0 0 15px 0; text-align:center;">FECHAMENTO DO M√äS</h3>
        <div id="billDetails" style="font-family: monospace; font-size: 0.85rem; line-height: 1.6;"></div>
        <button class="main-btn" onclick="payBills()" style="margin-top:20px; background:var(--danger); color:#fff;">PAGAR D√çVIDAS</button>
    </div>

    <header>
        <div class="logo" style="text-align:center; font-weight:900; color:var(--neon); margin-bottom:15px;">DEV FROM ZERO <small>V2.0</small></div>
        <div class="stats-grid">
            <div class="stat-card"><small>Caixa</small><b>$<span id="money">0</span></b></div>
            <div class="stat-card"><small>Dia</small><b><span id="dayCount">1</span>/10</b></div>
            <div class="stat-card"><small>N√≠vel</small><b><span id="level">1</span></b></div>
        </div>
        <div class="hype-banner">EM ALTA: <span id="hypeTag">---</span></div>
    </header>

    <nav class="tabs">
        <button onclick="showTab('dev')" class="tab-btn active" id="btn-dev">PROJETO</button>
        <button onclick="showTab('office')" class="tab-btn" id="btn-office">EST√öDIO</button>
        <button onclick="showTab('feed')" class="tab-btn" id="btn-feed">FEED</button>
    </nav>

    <main>
        <div id="dev" class="tab-content active">
            <div style="text-align: center; font-size: 0.65rem; color: #555; margin-bottom: 10px;">CAPACIDADE: <span id="currentPoints">0</span>/<span id="maxPoints">0</span></div>
            <div id="attrContainer"></div>
            
            <button id="publishBtn" class="main-btn" onclick="publishGame()" disabled>LAN√áAR JOGO</button>
            
            <div class="test-box">
                <button id="testBtn" class="secondary-btn" onclick="testGame()">Testar Projeto (LVL 10)</button>
                <div id="testResult" style="font-size:0.75rem; margin-top:10px; color:var(--warning)"></div>
            </div>
        </div>

        <div id="office" class="tab-content">
            <div id="upgradeList"></div>
            <div style="text-align:center; margin-top:20px;"><small onclick="resetGame()" style="color:#222; cursor:pointer;">Resetar Save</small></div>
        </div>

        <div id="feed" class="tab-content">
            <div id="gameLog" style="max-height: 300px; overflow-y:auto;"></div>
        </div>
    </main>

    <script>
        let game = {
            money: 600, level: 1, xp: 0, xpNeeded: 100,
            day: 1, inventory: [],
            stats: { gameplay: 0, graphics: 0, story: 0, optimization: 0 },
            currentHype: 'gameplay'
        };

        const UPGRADES = [
            { id: "s1", name: "Estagi√°rio", cost: 600, level: 2, val: 12, salary: 200, desc: "+12 Capacidade" },
            { id: "d1", name: "Escrit√≥rio", cost: 2500, level: 5, val: 1.6, salary: 700, desc: "+60% Lucro" },
            { id: "s2", name: "Dev Senior", cost: 12000, level: 15, val: 50, salary: 2200, desc: "+50 Capacidade" },
            { id: "d2", name: "Sede Global", cost: 50000, level: 30, val: 5.0, salary: 9000, desc: "5x Lucro" }
        ];

        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('btn-'+id).classList.add('active');
        }

        function updateUI() {
            document.getElementById('money').innerText = Math.floor(game.money).toLocaleString();
            document.getElementById('dayCount').innerText = game.day;
            document.getElementById('level').innerText = game.level;
            document.getElementById('hypeTag').innerText = game.currentHype.toUpperCase();

            let bPoints = 0;
            UPGRADES.filter(u => game.inventory.includes(u.id) && u.val > 10).forEach(u => {
                if(u.id.startsWith('s')) bPoints += u.val;
            });

            const maxCap = 20 + (game.level * 4) + bPoints;
            const currentPoints = Object.values(game.stats).reduce((a, b) => a + b, 0);

            document.getElementById('currentPoints').innerText = currentPoints;
            document.getElementById('maxPoints').innerText = maxCap;
            document.getElementById('publishBtn').disabled = (currentPoints === 0);

            // Teste de N√≠vel
            const testBtn = document.getElementById('testBtn');
            if(game.level < 10) {
                testBtn.disabled = true;
                testBtn.innerText = "Testar Projeto (LVL 10)";
            } else {
                testBtn.disabled = (currentPoints === 0);
                testBtn.innerText = "Rodar Testes QA";
            }

            renderAttributes(maxCap, currentPoints);
            renderUpgrades();
            localStorage.setItem('DevZero_Final_Save', JSON.stringify(game));
        }

        function renderAttributes(max, current) {
            document.getElementById('attrContainer').innerHTML = Object.keys(game.stats).map(cat => `
                <div class="attr-card">
                    <div class="attr-header">${cat.toUpperCase()} <b>${game.stats[cat]}</b></div>
                    <div style="display:flex; gap:5px;">
                        <button class="ctrl-btn" onclick="mod('${cat}', 1, ${max}, ${current})">+1</button>
                        <button class="ctrl-btn" onclick="mod('${cat}', 5, ${max}, ${current})">+5</button>
                    </div>
                </div>
            `).join('');
        }

        function mod(k, v, m, c) { 
            if(c + v <= m) game.stats[k] += v; 
            document.getElementById('testResult').innerText = "";
            updateUI(); 
        }

        function testGame() {
            const vals = Object.values(game.stats);
            const total = vals.reduce((a, b) => a + b, 0);
            const avg = total / 4;
            let penaltyCount = 0;
            vals.forEach(v => { if(v < avg * 0.5) penaltyCount++; });

            let msg = `Previs√£o: Jogo ${penaltyCount > 0 ? 'Desequilibrado' : 'Est√°vel'}.`;
            if(game.level >= 30) {
                let low = Object.keys(game.stats).reduce((a, b) => game.stats[a] < game.stats[b] ? a : b);
                msg += `<br>üí° Sugest√£o: Aumente '${low.toUpperCase()}'!`;
            }
            document.getElementById('testResult').innerHTML = msg;
        }

        function renderUpgrades() {
            document.getElementById('upgradeList').innerHTML = UPGRADES.map(u => {
                const owned = game.inventory.includes(u.id);
                return `
                <div class="upgrade-item">
                    <div style="font-size:0.75rem"><b>${u.name}</b><br><small>${u.desc}</small></div>
                    <button class="buy-btn" onclick="buy('${u.id}', ${u.cost})" ${owned || game.level < u.level ? 'disabled' : ''}>
                        ${owned ? 'ATIVO' : '$'+u.cost}
                    </button>
                </div>`;
            }).join('');
        }

        function buy(id, cost) { if(game.money >= cost) { game.money -= cost; game.inventory.push(id); updateUI(); } }

        function publishGame() {
            const vals = Object.values(game.stats);
            const total = vals.reduce((a, b) => a + b, 0);
            
            // L√≥gica de Equil√≠brio
            const avg = total / 4;
            let penalty = 1.0;
            vals.forEach(v => { if(v < avg * 0.5) penalty -= 0.2; });

            // Custos Imediatos
            const launchCost = 50 + (total * 2);
            game.money -= launchCost;

            // B√¥nus Hype
            const isHypeOk = (game.stats[game.currentHype] / total) > 0.4;
            const hypeMult = isHypeOk ? 1.7 : 1.0;

            // Multiplicadores de Escrit√≥rio
            let mMult = 1.0;
            if(game.inventory.includes("d1")) mMult = 1.6;
            if(game.inventory.includes("d2")) mMult = 5.0;

            const profit = Math.floor((total * 22) * Math.max(0.1, penalty) * hypeMult * mMult);
            game.money += profit;

            // Hist√≥rico
            const entry = document.createElement('div');
            entry.className = "log-entry";
            entry.innerHTML = `Dia ${game.day}: Lucro de $${profit} (${penalty < 1 ? 'Desequilibrado' : '√ìtimo'})`;
            document.getElementById('gameLog').prepend(entry);

            // Turno
            game.day++;
            game.currentHype = Object.keys(game.stats)[Math.floor(Math.random() * 4)];
            game.stats = { gameplay: 0, graphics: 0, story: 0, optimization: 0 };
            
            gainXP(total * 3);
            if(game.day > 10) showBills();
            else updateUI();
        }

        function showBills() {
            let fixed = 350;
            let payroll = 0;
            UPGRADES.filter(u => game.inventory.includes(u.id)).forEach(u => payroll += u.salary);
            let tax = Math.floor(game.money * 0.15);
            if(tax < 0) tax = 0;

            const total = fixed + payroll + tax;
            document.getElementById('billDetails').innerHTML = `
                Custo de Vida: -$${fixed}<br>
                Folha Salarial: -$${payroll}<br>
                Imposto Riqueza: -$${tax}<br>
                -----------------------<br>
                D√çVIDA TOTAL: $${total}
            `;
            document.getElementById('billModal').style.display = 'block';
            game.pendingBills = total;
        }

        function payBills() {
            game.money -= game.pendingBills;
            game.day = 1;
            document.getElementById('billModal').style.display = 'none';
            if(game.money < -500) {
                alert("FAL√äNCIA! Voc√™ n√£o suportou os custos mensais.");
                localStorage.clear(); location.reload();
            }
            updateUI();
        }

        function gainXP(v) {
            if(game.level >= 50) return;
            game.xp += v;
            while(game.xp >= game.xpNeeded && game.level < 50) {
                game.xp -= game.xpNeeded; game.level++; game.xpNeeded = Math.floor(game.xpNeeded * 1.5);
            }
        }

        function resetGame() { if(confirm("Apagar tudo?")) { localStorage.clear(); location.reload(); } }

        window.onload = () => {
            const saved = localStorage.getItem('DevZero_Final_Save');
            if(saved) game = JSON.parse(saved);
            updateUI();
        };
    </script>
</body>
</html>
