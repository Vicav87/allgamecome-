<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev From Zero - Ultimate Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon: #00ffaa;
            --neon-glow: rgba(0, 255, 170, 0.4);
            --bg: #050508;
            --glass: rgba(20, 20, 32, 0.9);
            --card: rgba(255, 255, 255, 0.03);
            --text: #e0e0e0;
            --danger: #ff4d6d;
            --warning: #ffcc00;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0; font-family: 'Inter', sans-serif;
            background: var(--bg); color: var(--text);
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; padding: 20px 10px;
        }

        #bgCanvas { position: fixed; top: 0; left: 0; z-index: -1; pointer-events: none; }

        /* HEADER E STATS */
        header {
            width: 100%; max-width: 500px;
            background: var(--glass); padding: 20px;
            border-radius: 24px; border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .logo {
            font-family: 'Orbitron', sans-serif; font-weight: 900;
            text-align: center; font-size: 1.4rem; color: var(--neon);
            text-shadow: 0 0 10px var(--neon-glow); margin-bottom: 20px;
        }

        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .stat-card { background: var(--card); padding: 12px 5px; border-radius: 16px; text-align: center; border: 1px solid rgba(255,255,255,0.05); }
        .stat-card b { display: block; color: var(--neon); font-size: 1rem; }
        .stat-card small { font-size: 0.6rem; color: #888; text-transform: uppercase; letter-spacing: 1px; }

        /* BARRA DE XP */
        .xp-section { margin-top: 15px; }
        .xp-label { display: flex; justify-content: space-between; font-size: 0.65rem; margin-bottom: 5px; font-weight: bold; color: #aaa; }
        .xp-bar-bg { background: rgba(255,255,255,0.05); height: 8px; border-radius: 10px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
        .xp-bar-fill { height: 100%; background: linear-gradient(90deg, var(--neon), #00d4ff); width: 0%; transition: width 0.4s cubic-bezier(0.17, 0.67, 0.83, 0.67); box-shadow: 0 0 10px var(--neon-glow); }

        .hype-banner {
            background: rgba(0, 255, 170, 0.05); border: 1px solid var(--neon);
            padding: 10px; border-radius: 14px; margin: 15px 0; text-align: center;
            font-size: 0.8rem; font-weight: bold; color: var(--neon);
            box-shadow: inset 0 0 15px rgba(0, 255, 170, 0.05);
        }

        /* NAVEGA√á√ÉO RESPONSIVA */
        nav.tabs {
            width: 100%; max-width: 500px; display: flex; gap: 8px; margin: 15px 0;
        }
        .tab-btn {
            flex: 1; padding: 14px; border: none; border-radius: 18px;
            background: var(--glass); color: #666; cursor: pointer;
            font-weight: 700; font-size: 0.8rem; transition: 0.3s;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .tab-btn.active { background: var(--neon); color: #000; box-shadow: 0 0 20px var(--neon-glow); }

        /* √ÅREA PRINCIPAL */
        main {
            width: 100%; max-width: 500px; padding: 25px;
            background: var(--glass); border-radius: 30px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .tab-content { display: none; animation: fadeIn 0.4s ease; }
        .tab-content.active { display: block; }

        /* CONTROLES DE ATRIBUTOS */
        .attr-card { background: var(--card); padding: 15px; border-radius: 20px; margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.03); }
        .attr-header { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.8rem; font-weight: bold; }
        .attr-header span { color: var(--neon); }
        .btn-group { display: flex; gap: 8px; }
        .ctrl-btn {
            flex: 1; padding: 12px; border-radius: 12px; border: none;
            background: #151520; color: #fff; font-weight: bold; cursor: pointer;
            border: 1px solid #222; transition: 0.2s;
        }
        .ctrl-btn:active { transform: scale(0.95); background: var(--neon); color: #000; }

        /* BOT√ïES DE A√á√ÉO */
        .main-btn {
            width: 100%; padding: 20px; border-radius: 20px; border: none;
            background: linear-gradient(135deg, var(--neon), #00cc88);
            color: #003322; font-weight: 900; font-size: 1rem; cursor: pointer;
            text-transform: uppercase; letter-spacing: 1px; transition: 0.3s;
        }
        .main-btn:disabled { background: #222; color: #444; cursor: not-allowed; box-shadow: none; }

        .secondary-btn {
            width: 100%; padding: 12px; border-radius: 14px; border: 1px solid var(--neon);
            background: transparent; color: var(--neon); font-weight: bold; cursor: pointer; margin-top: 15px;
        }

        /* UPGRADES */
        .upgrade-item { 
            background: rgba(255,255,255,0.02); padding: 15px; border-radius: 20px; 
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;
        }
        .buy-btn { background: #fff; color: #000; padding: 10px 15px; border-radius: 10px; border: none; font-weight: 800; cursor: pointer; }
        .buy-btn:disabled { background: #333; color: #666; }

        /* MODAL */
        #billModal {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 90%; max-width: 400px; background: #0a0a12; padding: 30px;
            border-radius: 30px; border: 2px solid var(--danger); z-index: 10000;
            box-shadow: 0 0 100px rgba(0,0,0,0.9);
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* RESPONSIVIDADE PARA PC */
        @media (min-width: 768px) {
            header, nav, main { max-width: 600px; }
            .stats-grid { gap: 20px; }
            .logo { font-size: 1.8rem; }
        }
    </style>
</head>
<body>
    <canvas id="bgCanvas"></canvas>

    <div id="billModal">
        <h2 style="color:var(--danger); margin-top:0; text-align:center;">CONTAS DO M√äS üìÖ</h2>
        <div id="billDetails" style="font-family: monospace; font-size: 0.9rem; line-height: 1.8; background: #111; padding: 15px; border-radius: 15px;"></div>
        <button class="main-btn" onclick="payBills()" style="margin-top:20px; background:var(--danger); color:white;">PAGAR TUDO</button>
    </div>

    <header>
        <div class="logo">DEV FROM ZERO</div>
        <div class="stats-grid">
            <div class="stat-card"><small>Grana</small><b>$<span id="money">0</span></b></div>
            <div class="stat-card"><small>Dia</small><b><span id="dayCount">1</span>/10</b></div>
            <div class="stat-card"><small>N√≠vel</small><b><span id="level">1</span></b></div>
        </div>
        <div class="xp-section">
            <div class="xp-label"><span>PROGRESSO DE N√çVEL</span> <span id="xpPercent">0%</span></div>
            <div class="xp-bar-bg"><div id="xpBar" class="xp-bar-fill"></div></div>
        </div>
        <div class="hype-banner">üî• HYPE DO MERCADO: <span id="hypeTag">---</span></div>
    </header>

    <nav class="tabs">
        <button onclick="showTab('dev')" class="tab-btn active" id="btn-dev">CRIAR</button>
        <button onclick="showTab('office')" class="tab-btn" id="btn-office">EST√öDIO</button>
        <button onclick="showTab('feed')" class="tab-btn" id="btn-feed">FEED</button>
    </nav>

    <main>
        <div id="dev" class="tab-content active">
            <div style="text-align: center; font-size: 0.7rem; color: #666; margin-bottom: 15px;">CAPACIDADE: <strong id="currentPoints" style="color:var(--neon)">0</strong> / <span id="maxPoints">0</span></div>
            <div id="attrContainer"></div>
            
            <button id="publishBtn" class="main-btn" onclick="publishGame()" disabled style="margin-top:10px">Lan√ßar Projeto</button>
            
            <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 20px; margin-top: 15px;">
                <button id="testBtn" class="secondary-btn" onclick="testGame()">An√°lise QA (N√≠vel 10)</button>
                <div id="testResult" style="font-size: 0.8rem; margin-top: 10px; color: var(--warning); text-align: center;"></div>
            </div>
        </div>

        <div id="office" class="tab-content">
            <div id="upgradeList"></div>
            <div style="text-align:center; margin-top:30px;"><small onclick="resetGame()" style="color:#222; cursor:pointer;">Resetar Jogo</small></div>
        </div>

        <div id="feed" class="tab-content">
            <div id="gameLog" style="max-height: 400px; overflow-y:auto;"></div>
        </div>
    </main>

    <script>
        let game = {
            money: 1000, level: 1, xp: 0, xpNeeded: 150,
            day: 1, inventory: [],
            stats: { gameplay: 0, graphics: 0, story: 0, optimization: 0 },
            currentHype: 'gameplay'
        };

        const UPGRADES = [
            { id: "s1", name: "Estagi√°rio", cost: 600, level: 2, val: 12, salary: 200, desc: "+12 Capacidade" },
            { id: "d1", name: "Escrit√≥rio Home", cost: 3000, level: 5, val: 1.6, salary: 600, desc: "+60% Lucro" },
            { id: "s2", name: "Dev Senior", cost: 15000, level: 15, val: 60, salary: 2500, desc: "+60 Capacidade" },
            { id: "d2", name: "Pr√©dio Tech", cost: 60000, level: 30, val: 6.0, salary: 12000, desc: "6x Lucro" }
        ];

        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('btn-'+id).classList.add('active');
        }

        function updateUI() {
            document.getElementById('money').innerText = Math.floor(game.money).toLocaleString();
            document.getElementById('level').innerText = game.level;
            document.getElementById('dayCount').innerText = game.day;
            document.getElementById('hypeTag').innerText = game.currentHype.toUpperCase();

            // XP Bar
            const xpPerc = Math.floor((game.xp / game.xpNeeded) * 100);
            document.getElementById('xpPercent').innerText = xpPerc + "%";
            document.getElementById('xpBar').style.width = xpPerc + "%";

            // Capacidade
            let bPoints = 0;
            UPGRADES.filter(u => game.inventory.includes(u.id) && u.id.startsWith('s')).forEach(u => bPoints += u.val);
            const max = 20 + (game.level * 5) + bPoints;
            const current = Object.values(game.stats).reduce((a, b) => a + b, 0);
            
            document.getElementById('currentPoints').innerText = current;
            document.getElementById('maxPoints').innerText = max;
            document.getElementById('publishBtn').disabled = (current === 0);

            // QA Button
            const tBtn = document.getElementById('testBtn');
            if(game.level < 10) { tBtn.disabled = true; tBtn.innerText = "QA Bloqueado (LVL 10)"; }
            else { tBtn.disabled = (current === 0); tBtn.innerText = "Rodar Diagn√≥stico"; }

            renderAttributes(max, current);
            renderUpgrades();
            localStorage.setItem('DevZero_Master', JSON.stringify(game));
        }

        function renderAttributes(max, current) {
            document.getElementById('attrContainer').innerHTML = Object.keys(game.stats).map(cat => `
                <div class="attr-card" style="${cat === game.currentHype ? 'border-right: 3px solid var(--neon)' : ''}">
                    <div class="attr-header">${cat.toUpperCase()} <span>${game.stats[cat]} ${cat === game.currentHype ? 'üî•' : ''}</span></div>
                    <div class="btn-group">
                        <button class="ctrl-btn" onclick="mod('${cat}', 1, ${max}, ${current})">+1</button>
                        <button class="ctrl-btn" onclick="mod('${cat}', 5, ${max}, ${current})">+5</button>
                    </div>
                </div>
            `).join('');
        }

        function mod(k, v, m, c) { if(c + v <= m) game.stats[k] += v; document.getElementById('testResult').innerText = ""; updateUI(); }

        function renderUpgrades() {
            document.getElementById('upgradeList').innerHTML = UPGRADES.map(u => {
                const owned = game.inventory.includes(u.id);
                return `
                <div class="upgrade-item">
                    <div style="font-size:0.8rem"><b>${u.name}</b><br><small style="color:#666">${u.desc}</small></div>
                    <button class="buy-btn" onclick="buy('${u.id}', ${u.cost})" ${owned || game.level < u.level ? 'disabled' : ''}>
                        ${owned ? '‚úì' : '$' + u.cost}
                    </button>
                </div>`;
            }).join('');
        }

        function buy(id, cost) { if(game.money >= cost) { game.money -= cost; game.inventory.push(id); updateUI(); } }

        function testGame() {
            const vals = Object.values(game.stats);
            const total = vals.reduce((a, b) => a + b, 0);
            const avg = total / 4;
            let low = 0; vals.forEach(v => { if(v < avg * 0.5) low++; });

            let msg = low > 0 ? "‚ö†Ô∏è Projeto Desequilibrado!" : "‚úÖ Estrutura S√≥lida.";
            if(game.level >= 30) {
                let worst = Object.keys(game.stats).reduce((a, b) => game.stats[a] < game.stats[b] ? a : b);
                msg += `<br>FOQUE EM: ${worst.toUpperCase()}`;
            }
            document.getElementById('testResult').innerHTML = msg;
        }

        function publishGame() {
            const vals = Object.values(game.stats);
            const total = vals.reduce((a, b) => a + b, 0);
            
            // L√≥gica Hardcore
            const avg = total / 4;
            let penalty = 1.0;
            vals.forEach(v => { if(v < avg * 0.45) penalty -= 0.25; });
            
            const launchCost = 50 + (total * 3);
            game.money -= launchCost;

            const hypeBonus = (game.stats[game.currentHype] / total) > 0.4 ? 1.8 : 1.0;
            let mMult = 1.0;
            if(game.inventory.includes("d1")) mMult = 1.6;
            if(game.inventory.includes("d2")) mMult = 6.0;

            const profit = Math.floor((total * 25) * Math.max(0.1, penalty) * hypeBonus * mMult);
            game.money += profit;

            // Log
            const entry = document.createElement('div');
            entry.style.padding = "10px"; entry.style.borderBottom = "1px solid #222"; entry.style.fontSize = "0.7rem";
            entry.innerHTML = `<b>Dia ${game.day}:</b> Lan√ßado! Lucro: $${profit.toLocaleString()} | Nota: ${(penalty*10).toFixed(1)}`;
            document.getElementById('gameLog').prepend(entry);

            // Next Day
            game.day++;
            game.currentHype = Object.keys(game.stats)[Math.floor(Math.random()*4)];
            game.stats = { gameplay: 0, graphics: 0, story: 0, optimization: 0 };
            
            gainXP(total * 4);
            if(game.day > 10) showBills();
            else updateUI();
        }

        function showBills() {
            let fixed = 400; let salaries = 0;
            UPGRADES.filter(u => game.inventory.includes(u.id)).forEach(u => salaries += u.salary);
            let taxes = Math.floor(game.money * 0.15);
            if(taxes < 0) taxes = 0;

            const total = fixed + salaries + taxes;
            document.getElementById('billDetails').innerHTML = `Fixo: -$400<br>Sal√°rios: -$${salaries}<br>Impostos (15%): -$${taxes}<br><hr><b>Total: -$${total}</b>`;
            document.getElementById('billModal').style.display = 'block';
            game.pendingBills = total;
        }

        function payBills() {
            game.money -= game.pendingBills;
            game.day = 1;
            document.getElementById('billModal').style.display = 'none';
            if(game.money < -1000) { alert("FAL√äNCIA! O banco tomou seu est√∫dio."); resetGame(true); }
            updateUI();
        }

        function gainXP(v) {
            game.xp += v;
            while(game.xp >= game.xpNeeded && game.level < 50) {
                game.xp -= game.xpNeeded; game.level++; game.xpNeeded = Math.floor(game.xpNeeded * 1.6);
            }
        }

        function resetGame(force = false) { if(force || confirm("Apagar progresso?")) { localStorage.clear(); location.reload(); } }

        window.onload = () => {
            const saved = localStorage.getItem('DevZero_Master');
            if(saved) game = JSON.parse(saved);
            const canvas = document.getElementById('bgCanvas'); const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            function anim() {
                ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle = "rgba(0,255,170,0.02)";
                for(let i=0; i<20; i++) ctx.fillRect(Math.random()*canvas.width, Math.random()*canvas.height, 2, 2);
                requestAnimationFrame(anim);
            }
            anim(); updateUI();
        };
    </script>
</body>
</html>
