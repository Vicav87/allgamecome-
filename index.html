<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dev From Zero - All-in-One</title>
  <style>
    :root {
      --neon: #00ffaa;
      --bg: #050508;
      --glass: rgba(20, 20, 30, 0.9);
      --text: #f0f0f0;
      --danger: #ff4d4d;
    }

    body {
      margin: 0; font-family: 'Inter', system-ui, sans-serif;
      background: var(--bg); color: var(--text);
      overflow-x: hidden; -webkit-font-smoothing: antialiased;
    }

    #bgCanvas { position: fixed; top: 0; left: 0; z-index: -1; }

    .app {
      max-width: 500px; margin: 20px auto; padding: 20px;
      border-radius: 24px; background: var(--glass);
      backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    }

    header { text-align: center; }
    .logo { color: var(--neon); text-transform: uppercase; font-size: 1.5rem; margin: 0; }

    .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0; }
    .stat-card { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 12px; text-align: center; font-weight: bold; font-size: 0.9rem; }

    .xp-container { background: rgba(0,0,0,0.3); height: 6px; border-radius: 10px; overflow: hidden; }
    .xp-fill { background: var(--neon); height: 100%; width: 0%; transition: width 0.5s ease; }
    .xp-info { display: flex; justify-content: space-between; align-items: center; margin-top: 5px; font-size: 0.8rem; }

    .tabs { display: flex; gap: 8px; margin: 20px 0; }
    .tab-btn {
      flex: 1; padding: 10px; border: none; border-radius: 10px;
      background: rgba(255,255,255,0.05); color: #888; cursor: pointer; font-weight: bold; transition: 0.2s;
    }
    .tab-btn.active { background: var(--neon); color: #000; }

    .tab-content { display: none; animation: fadeIn 0.3s ease; }
    .tab-content.active { display: block; }

    .attr-card { background: rgba(0,0,0,0.2); padding: 12px; border-radius: 14px; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.03); }
    .attr-label { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.85rem; }
    .attr-label span { color: var(--neon); font-weight: bold; }

    .btn-group { display: flex; gap: 4px; }
    .ctrl-btn { flex: 1; border: none; padding: 6px 0; border-radius: 6px; background: #252530; color: #fff; cursor: pointer; font-weight: bold; font-size: 0.75rem; }
    .ctrl-btn:active { transform: scale(0.95); }
    .sub { color: var(--danger); }

    .main-btn { width: 100%; padding: 15px; border: none; border-radius: 12px; background: var(--neon); color: #000; font-weight: bold; cursor: pointer; margin-top: 10px; }
    .main-btn:disabled { background: #333; color: #666; cursor: not-allowed; }

    .grid-list { display: grid; gap: 8px; margin-bottom: 20px; }
    .upgrade-card { background: rgba(255,255,255,0.03); padding: 12px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; border: 1px solid rgba(255,255,255,0.05); }
    .upgrade-card.owned { border-color: var(--neon); background: rgba(0, 255, 170, 0.05); }

    .feed-container { max-height: 250px; overflow-y: auto; padding-right: 5px; }
    .review-item { background: rgba(255,255,255,0.03); padding: 10px; border-radius: 10px; margin-bottom: 8px; border-left: 3px solid #444; font-size: 0.85rem; }

    .event-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 100; }
    .event-content { background: #1a1a24; padding: 25px; border-radius: 20px; text-align: center; border: 1px solid var(--neon); max-width: 300px; }

    .reset-btn { margin-top: 20px; background: none; border: 1px solid var(--danger); color: var(--danger); width: 100%; padding: 8px; border-radius: 8px; cursor: pointer; opacity: 0.5; font-size: 0.7rem; }
    .reset-btn:hover { opacity: 1; background: var(--danger); color: white; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body>

  <canvas id="bgCanvas"></canvas>

  <div class="app">
    <header>
      <h1 class="logo">Dev From Zero</h1>
      <div class="stats-grid">
        <div class="stat-card">üí∞ $<span id="money">500</span></div>
        <div class="stat-card">‚≠ê <span id="reputation">1.0</span></div>
        <div class="stat-card">üìà N√≠vel <span id="level">1</span></div>
      </div>
      <div class="xp-wrapper">
        <div class="xp-container"><div id="xpBar" class="xp-fill"></div></div>
        <div class="xp-info">
          <small id="xpText">0 / 100 XP</small>
          <span id="studioStatus" style="color: var(--neon); font-weight: bold;">Iniciante</span>
        </div>
      </div>
    </header>

    <nav class="tabs">
      <button onclick="showTab('dev')" class="tab-btn active">üõ† Projeto</button>
      <button onclick="showTab('office')" class="tab-btn">üè¢ Empresa</button>
      <button onclick="showTab('history')" class="tab-btn">üìú Not√≠cias</button>
    </nav>

    <main id="dev" class="tab-content active">
      <div style="display:flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 10px;">
        <span>Pontos Dispon√≠veis:</span>
        <strong><span id="currentPoints">0</span> / <span id="maxPoints">20</span></strong>
      </div>
      <div id="attrStack"></div>
      <div id="marketTrend" style="font-size: 0.75rem; color: var(--neon); margin: 10px 0; text-align: center;">üî• Buscando tend√™ncia...</div>
      <button id="publishBtn" class="main-btn" onclick="publishGame()" disabled>LAN√áAR JOGO</button>
    </main>

    <main id="office" class="tab-content">
      <h4 style="margin: 0 0 10px 0; color: var(--neon);">üî¨ Tecnologias</h4>
      <div id="techTree" class="grid-list"></div>
      <h4 style="margin: 15px 0 10px 0; color: var(--neon);">üë• Equipe</h4>
      <div id="staffList" class="grid-list"></div>
      <button onclick="resetGame()" class="reset-btn">Zerar Todo o Progresso</button>
    </main>

    <main id="history" class="tab-content">
      <div id="gameLog" class="feed-container"></div>
    </main>
  </div>

  <div id="eventOverlay" class="event-modal" style="display:none;">
    <div class="event-content">
      <h3 id="eventTitle" style="color: var(--neon); margin-top: 0;">Evento!</h3>
      <p id="eventDesc" style="font-size: 0.9rem; line-height: 1.4;"></p>
      <button onclick="closeEvent()" class="main-btn">OK</button>
    </div>
  </div>

  <script>
    // --- ESTADO DO JOGO ---
    let game = {
      money: 500, reputation: 1.0, level: 1, xp: 0, xpNeeded: 100, trend: "gameplay",
      staff: [], techs: [],
      stats: { gameplay: 0, graphics: 0, optimization: 0, story: 0, marketing: 0 }
    };

    const statusNames = { 1: "Dev de Quarto", 10: "Freelancer", 25: "Micro Est√∫dio", 50: "Est√∫dio Indie", 100: "Lenda" };
    const techData = [
      { id: "engine", name: "Engine Pr√≥pria", cost: 1200, desc: "Otimiza√ß√£o 30% mais f√°cil" },
      { id: "graphics3d", name: "Gr√°ficos 3D", cost: 3500, desc: "Dobra valor de Gr√°ficos" }
    ];
    const staffData = [
      { id: "dev", name: "Dev Senior", cost: 2000, salary: 150, type: "optimization", power: 30 },
      { id: "art", name: "Artista Pro", cost: 1500, salary: 100, type: "graphics", power: 25 }
    ];

    // --- NAVEGA√á√ÉO ---
    function showTab(id) {
      document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      event.currentTarget.classList.add('active');
    }

    // --- ATRIBUTOS ---
    function renderAttributes() {
      const container = document.getElementById('attrStack');
      const keys = ["gameplay", "graphics", "story", "optimization"];
      if(game.level >= 5) keys.push("marketing");
      
      container.innerHTML = keys.map(key => `
        <div class="attr-card">
          <div class="attr-label">${key.toUpperCase()} <span id="val-${key}">${game.stats[key]}</span></div>
          <div class="btn-group">
            <button class="ctrl-btn sub" onclick="changeAttr('${key}', -5)">-5</button>
            <button class="ctrl-btn" onclick="changeAttr('${key}', 1)">+1</button>
            <button class="ctrl-btn" onclick="changeAttr('${key}', 5)">+5</button>
            <button class="ctrl-btn" onclick="addMax('${key}')">MAX</button>
          </div>
        </div>
      `).join('');
    }

    function changeAttr(id, amt) {
      const max = 20 + (game.level * 5);
      const current = Object.values(game.stats).reduce((a, b) => a + b, 0);
      let newVal = Math.max(0, game.stats[id] + amt);
      if(amt > 0 && (current + amt) > max) newVal = game.stats[id] + (max - current);
      game.stats[id] = newVal;
      updateUI();
    }

    function addMax(id) {
      const max = 20 + (game.level * 5);
      const current = Object.values(game.stats).reduce((a, b) => a + b, 0);
      game.stats[id] += (max - current);
      updateUI();
    }

    // --- MEC√ÇNICA DE JOGO ---
    function publishGame() {
      let { gameplay: gp, graphics: gr, story: st, optimization: ot, marketing: mk } = game.stats;
      
      // B√¥nus Equipe e Tech
      game.staff.forEach(s => { if(s.type === 'optimization') ot += s.power; if(s.type === 'graphics') gr += s.power; });
      if(game.techs.includes('graphics3d')) gr *= 2;

      let scoreBase = (gp * 3) + (gr * 1.5) + (st * 1.5);
      if(game.trend === "gameplay") scoreBase *= 1.4;

      const bugChance = (gp + gr + st) * 0.2;
      const otFinal = game.techs.includes('engine') ? ot * 1.4 : ot;
      const penalty = otFinal < bugChance ? 0.6 : 1.0;

      const note = Math.min(10, (scoreBase / ((20 + game.level * 5) * 1.5)) * 10 * penalty).toFixed(1);
      const profit = Math.floor(note * 100 * game.reputation * (1 + mk/15));

      game.money += profit;
      game.reputation += note >= 8 ? 0.2 : (note < 4 ? -0.2 : 0.05);
      gainXP(Math.floor(note * 25));
      addLog(note, profit, penalty < 1.0);
      
      game.stats = { gameplay: 0, graphics: 0, optimization: 0, story: 0, marketing: 0 };
      randomizeTrend();
      saveGame();
      updateUI();
    }

    function buyTech(id, cost) {
      if(game.money >= cost) { game.money -= cost; game.techs.push(id); updateUI(); saveGame(); }
    }

    function hireStaff(id) {
      const s = staffData.find(x => x.id === id);
      if(game.money >= s.cost) { game.money -= s.cost; game.staff.push(s); updateUI(); saveGame(); }
    }

    // --- AUXILIARES ---
    function gainXP(amt) {
      game.xp += amt;
      while(game.xp >= game.xpNeeded && game.level < 100) {
        game.xp -= game.xpNeeded; game.level++; game.xpNeeded = Math.floor(game.xpNeeded * 1.3);
      }
    }

    function addLog(n, p, b) {
      const log = document.getElementById('gameLog');
      const d = document.createElement('div');
      d.className = "review-item";
      d.style.borderLeftColor = n >= 7 ? "var(--neon)" : (n >= 4 ? "#ffaa00" : "var(--danger)");
      d.innerHTML = `<strong>Review: ${n}/10</strong> | Lucro: $${p}<br><small>${b ? "‚ö†Ô∏è Muitos bugs reclamados!" : "üíé Jogo muito polido."}</small>`;
      log.prepend(d);
    }

    function randomizeTrend() {
      const trends = ["gameplay", "graphics", "story"];
      game.trend = trends[Math.floor(Math.random() * trends.length)];
      document.getElementById('marketTrend').textContent = `üî• TEND√äNCIA ATUAL: ${game.trend.toUpperCase()}`;
    }

    // --- SAVE / UI ---
    function saveGame() { localStorage.setItem('devZeroFinal', JSON.stringify(game)); }
    function loadGame() {
      const saved = localStorage.getItem('devZeroFinal');
      if(saved) { game = JSON.parse(saved); updateUI(); }
    }
    function resetGame() { if(confirm("Apagar tudo?")) { localStorage.clear(); location.reload(); } }

    function updateUI() {
      document.getElementById('money').textContent = Math.floor(game.money);
      document.getElementById('reputation').textContent = game.reputation.toFixed(1);
      document.getElementById('level').textContent = game.level;
      document.getElementById('xpBar').style.width = `${(game.xp/game.xpNeeded)*100}%`;
      document.getElementById('xpText').textContent = `${game.xp}/${game.xpNeeded} XP`;
      
      const current = Object.values(game.stats).reduce((a, b) => a + b, 0);
      const max = 20 + (game.level * 5);
      document.getElementById('currentPoints').textContent = current;
      document.getElementById('maxPoints').textContent = max;
      document.getElementById('publishBtn').disabled = current === 0;

      let st = "Iniciante";
      for(let l in statusNames) if(game.level >= l) st = statusNames[l];
      document.getElementById('studioStatus').textContent = st;

      renderAttributes();
      renderShop();
    }

    function renderShop() {
      document.getElementById('techTree').innerHTML = techData.map(t => `
        <div class="upgrade-card ${game.techs.includes(t.id) ? 'owned' : ''}">
          <span style="font-size: 0.8rem;"><strong>${t.name}</strong><br><small>${t.desc}</small></span>
          <button onclick="buyTech('${t.id}', ${t.cost})" class="ctrl-btn" ${game.techs.includes(t.id)?'disabled':''}>$${t.cost}</button>
        </div>`).join('');

      document.getElementById('staffList').innerHTML = staffData.map(s => `
        <div class="upgrade-card ${game.staff.find(x=>x.id===s.id) ? 'owned' : ''}">
          <span style="font-size: 0.8rem;"><strong>${s.name}</strong><br><small>Sal√°rio: $${s.salary}</small></span>
          <button onclick="hireStaff('${s.id}')" class="ctrl-btn" ${game.staff.find(x=>x.id===s.id)?'disabled':''}>$${s.cost}</button>
        </div>`).join('');
    }

    // --- CANVAS ---
    const canvas = document.getElementById('bgCanvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    function initCanvas() {
      canvas.width = window.innerWidth; canvas.height = window.innerHeight;
      particles = Array.from({length: 40}, () => ({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*2, v: 0.5 + Math.random() }));
    }
    function animate() {
      ctx.clearRect(0,0,canvas.width, canvas.height);
      ctx.fillStyle = "#00ffaa11";
      particles.forEach(p => { p.y -= p.v; if(p.y < 0) p.y = canvas.height; ctx.beginPath(); ctx.arc(p.x, p.y, p.s, 0, Math.PI*2); ctx.fill(); });
      requestAnimationFrame(animate);
    }

    // Sal√°rios (20s)
    setInterval(() => {
      const sal = game.staff.reduce((a, b) => a + b.salary, 0);
      if(sal > 0) { game.money = Math.max(0, game.money - sal); updateUI(); saveGame(); }
    }, 20000);

    window.onload = () => { loadGame(); initCanvas(); animate(); randomizeTrend(); updateUI(); };
    window.onresize = initCanvas;
  </script>
</body>
</html>
