<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev From Zero - Level 50 Edition</title>
    <style>
        :root {
            --neon: #00ffaa;
            --bg: #050508;
            --glass: rgba(20, 20, 30, 0.95);
            --text: #f0f0f0;
            --danger: #ff4d4d;
            --card-bg: rgba(255, 255, 255, 0.05);
        }

        body {
            margin: 0; font-family: 'Inter', system-ui, sans-serif;
            background: var(--bg); color: var(--text);
            overflow-x: hidden;
        }

        #bgCanvas { position: fixed; top: 0; left: 0; z-index: -1; pointer-events: none; }

        .app {
            max-width: 500px; margin: 20px auto; padding: 25px;
            border-radius: 28px; background: var(--glass);
            backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 25px 60px rgba(0,0,0,0.8);
        }

        header { text-align: center; margin-bottom: 20px; }
        .logo { color: var(--neon); text-transform: uppercase; font-size: 1.6rem; margin: 0; font-weight: 900; }
        
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin: 15px 0; }
        .stat-card { background: var(--card-bg); padding: 12px; border-radius: 16px; text-align: center; border-bottom: 2px solid var(--neon); }
        .stat-card b { display: block; font-size: 1.1rem; }

        .xp-container { background: rgba(0,0,0,0.4); height: 8px; border-radius: 10px; overflow: hidden; margin-top: 10px;}
        .xp-fill { background: linear-gradient(90deg, var(--neon), #00d4ff); height: 100%; width: 0%; transition: width 0.5s ease; }

        .tabs { display: flex; gap: 8px; margin: 20px 0; }
        .tab-btn {
            flex: 1; padding: 12px; border: none; border-radius: 12px;
            background: var(--card-bg); color: #777; cursor: pointer; font-weight: bold;
        }
        .tab-btn.active { background: var(--neon); color: #000; }

        .tab-content { display: none; animation: slideUp 0.4s ease; }
        .tab-content.active { display: block; }

        /* UPGRADES */
        .level-header { background: rgba(0,255,170,0.1); padding: 10px; border-radius: 10px; text-align: center; margin-bottom: 15px; border: 1px dashed var(--neon); }
        .upgrade-item { 
            background: var(--card-bg); padding: 15px; border-radius: 15px; 
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.05);
        }
        .locked { opacity: 0.3; filter: grayscale(1); }
        .owned { border-color: var(--neon); background: rgba(0,255,170,0.08); }
        
        .lvl-badge { background: #333; color: var(--neon); padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; font-weight: bold; }
        .bonus-tag { font-size: 0.65rem; color: #aaa; text-transform: uppercase; letter-spacing: 0.5px; }
        
        .buy-btn { background: var(--neon); border: none; padding: 10px 14px; border-radius: 10px; font-weight: bold; cursor: pointer; }
        .buy-btn:disabled { background: #444; color: #888; cursor: not-allowed; }

        .feed { max-height: 250px; overflow-y: auto; }
        .log-entry { background: var(--card-bg); padding: 12px; border-radius: 12px; margin-bottom: 8px; border-left: 4px solid var(--neon); font-size: 0.8rem; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <canvas id="bgCanvas"></canvas>

    <div class="app">
        <header>
            <h1 class="logo">Dev From Zero</h1>
            <div class="stats-grid">
                <div class="stat-card"><small>Grana</small><b>$<span id="money">0</span></b></div>
                <div class="stat-card"><small>Rep</small><b>‚≠ê<span id="reputation">0</span></b></div>
                <div class="stat-card"><small>Level</small><b><span id="level">1</span>/50</b></div>
            </div>
            <div class="xp-container"><div id="xpBar" class="xp-fill"></div></div>
        </header>

        <nav class="tabs">
            <button onclick="showTab('dev')" class="tab-btn active" id="btn-dev">üõ† Projeto</button>
            <button onclick="showTab('office')" class="tab-btn" id="btn-office">üè¢ Upgrades</button>
            <button onclick="showTab('history')" class="tab-btn" id="btn-history">üìú Feed</button>
        </nav>

        <main id="dev" class="tab-content active">
            <div style="text-align: center; font-size: 0.85rem; margin-bottom: 15px; color: #aaa;">
                Capacidade de Pontos: <strong id="currentPoints" style="color:var(--neon)">0</strong> / <strong id="maxPoints">0</strong>
            </div>
            <div id="attrContainer"></div>
            <button id="publishBtn" style="width:100%; padding:18px; border-radius:15px; border:none; background:var(--neon); font-weight:900; cursor:pointer; margin-top:10px;" onclick="publishGame()" disabled>LAN√áAR JOGO</button>
        </main>

        <main id="office" class="tab-content">
            <div class="level-header">Seu N√≠vel: <strong id="currentLvlDisplay">1</strong></div>
            <div id="upgradeList"></div>
            <center><small onclick="resetGame()" style="cursor:pointer; opacity:0.2; display:block; margin: 20px;">Resetar Save</small></center>
        </main>

        <main id="history" class="tab-content">
            <div id="gameLog" class="feed"></div>
        </main>
    </div>

    <script>
        let game = {
            money: 500, reputation: 1.0, level: 1, xp: 0, xpNeeded: 100,
            inventory: [],
            stats: { gameplay: 0, graphics: 0, story: 0, optimization: 0 }
        };

        // LISTA DE UPGRADES AT√â O N√çVEL 50
        const UPGRADES = [
            { id: "desk", name: "Cadeira Gamer", cost: 400, level: 2, bonus: "points", val: 5, desc: "+5 Pontos de capacidade" },
            { id: "course", name: "Curso Online", cost: 900, level: 4, bonus: "xp", val: 1.2, desc: "+20% Ganho de XP" },
            { id: "coffee", name: "Cafeteira Pro", cost: 1500, level: 6, bonus: "points", val: 10, desc: "+10 Pontos de capacidade" },
            { id: "ads", name: "An√∫ncios B√°sicos", cost: 2500, level: 8, bonus: "money", val: 1.3, desc: "+30% Lucro nos jogos" },
            { id: "pc_mid", name: "PC Intermedi√°rio", cost: 4500, level: 12, bonus: "points", val: 20, desc: "+20 Pontos de capacidade" },
            { id: "junior", name: "Dev Junior", cost: 8000, level: 15, bonus: "xp", val: 1.5, desc: "+50% Ganho de XP" },
            { id: "engine", name: "Engine 3D", cost: 15000, level: 20, bonus: "money", val: 1.8, desc: "+80% Lucro nos jogos" },
            { id: "setup", name: "Setup Dual-Monitor", cost: 25000, level: 25, bonus: "points", val: 40, desc: "+40 Pontos de capacidade" },
            { id: "office", name: "Pequeno Escrit√≥rio", cost: 50000, level: 30, bonus: "money", val: 2.5, desc: "2.5x Mais lucro" },
            { id: "senior", name: "Dev Senior", cost: 120000, level: 40, bonus: "xp", val: 2.5, desc: "2.5x Mais Experi√™ncia" },
            { id: "legend", name: "Sede Global", cost: 500000, level: 50, bonus: "money", val: 5.0, desc: "5x Lucro (N√≠vel M√°ximo)" }
        ];

        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('btn-'+id).classList.add('active');
        }

        function updateUI() {
            document.getElementById('money').innerText = Math.floor(game.money);
            document.getElementById('reputation').innerText = game.reputation.toFixed(1);
            document.getElementById('level').innerText = game.level;
            document.getElementById('currentLvlDisplay').innerText = game.level;
            document.getElementById('xpBar').style.width = (game.xp / game.xpNeeded * 100) + "%";

            // C√°lculo din√¢mico de Capacidade M√°xima
            let bonusPoints = 0;
            UPGRADES.filter(u => u.bonus === "points" && game.inventory.includes(u.id)).forEach(u => bonusPoints += u.val);
            const max = 20 + (game.level * 5) + bonusPoints;
            const current = Object.values(game.stats).reduce((a, b) => a + b, 0);

            document.getElementById('currentPoints').innerText = current;
            document.getElementById('maxPoints').innerText = max;
            document.getElementById('publishBtn').disabled = (current === 0);

            renderAttributes(max, current);
            renderUpgradeTab();
        }

        function renderAttributes(max, current) {
            const container = document.getElementById('attrContainer');
            container.innerHTML = Object.keys(game.stats).map(key => `
                <div class="attr-card">
                    <div class="attr-header">${key.toUpperCase()} <span>${game.stats[key]}</span></div>
                    <div class="btn-group">
                        <button class="ctrl-btn" onclick="modifyAttr('${key}', 1, ${max}, ${current})">+1</button>
                        <button class="ctrl-btn" onclick="modifyAttr('${key}', 5, ${max}, ${current})">+5</button>
                        <button class="ctrl-btn" onclick="modifyAttr('${key}', 10, ${max}, ${current})">+10</button>
                    </div>
                </div>
            `).join('');
        }

        function modifyAttr(key, amt, max, current) {
            if (current + amt <= max) {
                game.stats[key] += amt;
                updateUI();
            }
        }

        function renderUpgradeTab() {
            const list = document.getElementById('upgradeList');
            list.innerHTML = UPGRADES.map(u => {
                const isLocked = game.level < u.level;
                const isOwned = game.inventory.includes(u.id);
                return `
                <div class="upgrade-item ${isLocked ? 'locked' : ''} ${isOwned ? 'owned' : ''}">
                    <div>
                        <div style="display:flex; align-items:center; gap:8px; margin-bottom:4px;">
                            <span class="lvl-badge">LVL ${u.level}</span>
                            <b style="font-size:0.9rem">${u.name}</b>
                        </div>
                        <span class="bonus-tag">${u.desc}</span>
                    </div>
                    <button class="buy-btn" onclick="buyItem('${u.id}', ${u.cost})" ${(isLocked || isOwned) ? 'disabled' : ''}>
                        ${isOwned ? '‚úì' : '$' + u.cost}
                    </button>
                </div>`;
            }).join('');
        }

        function buyItem(id, cost) {
            if (game.money >= cost) {
                game.money -= cost;
                game.inventory.push(id);
                updateUI();
                saveGame();
            }
        }

        function publishGame() {
            const totalPoints = Object.values(game.stats).reduce((a, b) => a + b, 0);
            const note = Math.min(10, (totalPoints / (20 + game.level * 4) * 10)).toFixed(1);
            
            // Aplicar B√¥nus de Dinheiro dos Upgrades
            let moneyMult = 1.0;
            UPGRADES.filter(u => u.bonus === "money" && game.inventory.includes(u.id)).forEach(u => moneyMult = u.val);
            const profit = Math.floor(note * 150 * game.reputation * moneyMult);

            // Aplicar B√¥nus de XP dos Upgrades
            let xpMult = 1.0;
            UPGRADES.filter(u => u.bonus === "xp" && game.inventory.includes(u.id)).forEach(u => xpMult = u.val);

            game.money += profit;
            game.reputation += note > 8 ? 0.2 : 0.05;
            
            addLog(note, profit);
            gainXP(Math.floor(note * 30 * xpMult));
            
            game.stats = { gameplay: 0, graphics: 0, story: 0, optimization: 0 };
            updateUI();
            saveGame();
        }

        function gainXP(amt) {
            if (game.level >= 50) return;
            game.xp += amt;
            while (game.xp >= game.xpNeeded && game.level < 50) {
                game.xp -= game.xpNeeded;
                game.level++;
                game.xpNeeded = Math.floor(game.xpNeeded * 1.35);
            }
        }

        function addLog(n, p) {
            const d = document.createElement('div');
            d.className = "log-entry";
            d.innerHTML = `<b>Lan√ßamento: ${n}/10</b><br><small>Receita: +$${p}</small>`;
            document.getElementById('gameLog').prepend(d);
        }

        function saveGame() { localStorage.setItem('DevZero_Final_S50', JSON.stringify(game)); }
        function loadGame() {
            const s = localStorage.getItem('DevZero_Final_S50');
            if(s) { game = JSON.parse(s); updateUI(); }
        }
        function resetGame() { if(confirm("Deseja apagar seu imp√©rio?")) { localStorage.clear(); location.reload(); } }

        // Fundo
        const canvas = document.getElementById('bgCanvas'); const ctx = canvas.getContext('2d');
        let pts = [];
        function initC() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            pts = Array.from({length: 30}, () => ({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, v: 0.4+Math.random(), s: Math.random()*2 }));
        }
        function anim() {
            ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle = "rgba(0,255,170,0.1)";
            pts.forEach(p => { p.y -= p.v; if(p.y < 0) p.y = canvas.height; ctx.beginPath(); ctx.arc(p.x, p.y, p.s, 0, Math.PI*2); ctx.fill(); });
            requestAnimationFrame(anim);
        }

        window.onload = () => { loadGame(); initC(); anim(); updateUI(); };
    </script>
</body>
</html>