<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev From Zero - Master Tycoon</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon: #00ffaa;
            --neon-glow: rgba(0, 255, 170, 0.4);
            --bg: #050508;
            --glass: rgba(15, 15, 25, 0.95);
            --card: rgba(255, 255, 255, 0.03);
            --text: #e0e0e0;
            --danger: #ff4d6d;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { 
            margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); 
            display: flex; flex-direction: column; align-items: center; padding: 15px; overflow-x: hidden;
        }

        #bgCanvas { position: fixed; top: 0; left: 0; z-index: -1; pointer-events: none; opacity: 0.3; }

        header, nav, main { width: 100%; max-width: 500px; margin-bottom: 12px; }

        /* HEADER */
        header { 
            background: var(--glass); padding: 20px; border-radius: 24px; 
            border: 1px solid rgba(255,255,255,0.08); box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .logo { 
            font-family: 'Orbitron', sans-serif; font-weight: 900; text-align: center; 
            color: var(--neon); text-shadow: 0 0 10px var(--neon-glow); margin-bottom: 15px; font-size: 1.2rem;
        }
        
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .stat-card { background: var(--card); padding: 10px 5px; border-radius: 15px; text-align: center; border: 1px solid rgba(255,255,255,0.03); }
        .stat-card b { display: block; color: var(--neon); font-size: 0.9rem; }
        .stat-card small { font-size: 0.55rem; color: #777; text-transform: uppercase; letter-spacing: 1px; }

        /* PROGRESS BAR */
        .xp-container { margin-top: 15px; }
        .xp-header { display: flex; justify-content: space-between; font-size: 0.6rem; font-weight: bold; margin-bottom: 4px; color: #888; }
        .xp-bar-bg { background: rgba(0,0,0,0.5); height: 10px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); overflow: hidden; }
        .xp-bar-fill { height: 100%; background: linear-gradient(90deg, var(--neon), #00d4ff); width: 0%; transition: width 0.5s ease-out; box-shadow: 0 0 10px var(--neon-glow); }

        .hype-tag { 
            background: rgba(0, 255, 170, 0.1); border: 1px solid var(--neon); padding: 8px; 
            border-radius: 12px; margin-top: 15px; text-align: center; font-weight: 900; color: var(--neon); font-size: 0.75rem;
        }

        /* NAVIGATION */
        nav.tabs { display: flex; gap: 8px; }
        .tab-btn { 
            flex: 1; padding: 14px; border: none; border-radius: 16px; background: var(--glass); 
            color: #555; cursor: pointer; font-weight: 700; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s;
        }
        .tab-btn.active { background: var(--neon); color: #000; box-shadow: 0 0 15px var(--neon-glow); }

        /* MAIN CONTENT */
        main { 
            background: var(--glass); padding: 20px; border-radius: 28px; border: 1px solid rgba(255,255,255,0.08); 
            min-height: 400px;
        }
        .tab-content { display: none; animation: slideUp 0.3s ease-out; }
        .tab-content.active { display: block; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* ATTRIBUTES */
        .attr-card { background: rgba(0,0,0,0.2); padding: 15px; border-radius: 20px; margin-bottom: 10px; border-left: 4px solid transparent; }
        .attr-card.is-hype { border-left-color: var(--neon); background: rgba(0, 255, 170, 0.03); }
        .attr-info { display: flex; justify-content: space-between; font-weight: bold; font-size: 0.8rem; margin-bottom: 10px; }
        .btn-row { display: flex; gap: 6px; }
        .btn-row button { flex: 1; padding: 10px; border: none; border-radius: 10px; background: #1a1a2a; color: white; cursor: pointer; border: 1px solid #333; }
        .btn-row button:active { background: var(--neon); color: #000; }

        /* BUTTONS */
        .publish-btn { 
            width: 100%; padding: 20px; border-radius: 20px; border: none; background: var(--neon); 
            color: #000; font-weight: 900; font-size: 1rem; cursor: pointer; margin-top: 10px; transition: 0.3s;
        }
        .publish-btn:disabled { background: #222; color: #444; transform: scale(1); }
        
        .qa-btn { 
            width: 100%; background: transparent; border: 1px solid var(--neon); color: var(--neon); 
            padding: 10px; border-radius: 15px; margin-top: 10px; font-weight: bold; cursor: pointer;
        }

        /* UPGRADES */
        .upgrade-item { background: var(--card); padding: 15px; border-radius: 18px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .up-text b { display: block; color: var(--neon); font-size: 0.85rem; }
        .up-text small { font-size: 0.65rem; color: #666; }
        .buy-btn { background: white; color: black; border: none; padding: 10px 15px; border-radius: 10px; font-weight: 800; font-size: 0.75rem; cursor: pointer; }
        .buy-btn:disabled { background: #222; color: #555; }

        /* MODAL */
        #billModal { 
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            width: 90%; max-width: 400px; background: #080810; padding: 30px; border-radius: 30px; 
            border: 2px solid var(--danger); z-index: 1000; box-shadow: 0 0 100px #000;
        }

        .log-item { font-size: 0.7rem; padding: 10px; border-bottom: 1px solid #1a1a1a; display: flex; justify-content: space-between; }
    </style>
</head>
<body>
    <canvas id="bgCanvas"></canvas>

    <div id="billModal">
        <h2 style="color:var(--danger); text-align:center; margin-top:0;">FECHAMENTO MENSAL</h2>
        <div id="billDetails" style="font-family: monospace; font-size: 0.85rem; background: #000; padding: 20px; border-radius: 15px; margin-bottom: 20px; line-height: 1.6;"></div>
        <button class="publish-btn" onclick="payBills()" style="background:var(--danger); color:white;">PAGAR CONTAS</button>
    </div>

    <header>
        <div class="logo">DEV FROM ZERO: TYCOON</div>
        <div class="stats-grid">
            <div class="stat-card"><small>Caixa</small><b>$<span id="money">0</span></b></div>
            <div class="stat-card"><small>Dia</small><b><span id="dayCount">1</span>/10</b></div>
            <div class="stat-card"><small>NÃ­vel</small><b><span id="level">1</span></b></div>
        </div>
        <div class="xp-container">
            <div class="xp-header"><span>PROGRESSO XP</span> <span id="xpText">0/100</span></div>
            <div class="xp-bar-bg"><div id="xpBar" class="xp-bar-fill"></div></div>
        </div>
        <div class="hype-tag">MERCADO EM ALTA: <span id="hypeTag">GAMEPLAY</span></div>
    </header>

    <nav class="tabs">
        <button onclick="showTab('dev')" class="tab-btn active" id="btn-dev">PROJETO</button>
        <button onclick="showTab('office')" class="tab-btn" id="btn-office">ESTÃšDIO</button>
        <button onclick="showTab('feed')" class="tab-btn" id="btn-feed">FEED</button>
    </nav>

    <main>
        <div id="dev" class="tab-content active">
            <div style="text-align:center; font-size:0.7rem; color:#555; margin-bottom:15px;">CAPACIDADE: <b id="currentPoints" style="color:var(--neon)">0</b> / <span id="maxPoints">20</span></div>
            <div id="attrContainer"></div>
            <button id="publishBtn" class="publish-btn" onclick="publishGame()" disabled>LANÃ‡AR JOGO</button>
            <button id="qaBtn" class="qa-btn" onclick="runQA()">RODAR TESTE QA (LVL 10)</button>
            <div id="qaResult" style="text-align:center; font-size:0.75rem; margin-top:10px; color:var(--neon)"></div>
        </div>

        <div id="office" class="tab-content">
            <div id="upgradeList"></div>
            <div style="text-align:center; margin-top:20px;"><small onclick="resetGame()" style="color:#222; cursor:pointer;">Resetar Jogo</small></div>
        </div>

        <div id="feed" class="tab-content">
            <div id="gameLog"></div>
        </div>
    </main>

    <script>
        let game = {
            money: 1000, level: 1, xp: 0, xpNeeded: 150, day: 1, inventory: [],
            stats: { gameplay: 0, graphics: 0, story: 0, optimization: 0 },
            currentHype: 'gameplay'
        };

        const UPGRADES = [
            { id: "s1", name: "EstagiÃ¡rio", cost: 600, level: 2, val: 15, salary: 250, type: "cap", desc: "+15 Capacidade" },
            { id: "cafe", name: "Cafeteira Pro", cost: 1500, level: 4, val: 1.3, salary: 50, type: "xp", desc: "+30% Velocidade XP" },
            { id: "d1", name: "EscritÃ³rio Novo", cost: 5000, level: 8, val: 1.8, salary: 900, type: "profit", desc: "+80% Lucro" },
            { id: "s2", name: "Dev Senior", cost: 18000, level: 15, val: 60, salary: 3000, type: "cap", desc: "+60 Capacidade" },
            { id: "tax", name: "Contador Ninja", cost: 40000, level: 25, val: 0.05, salary: 1500, type: "tax", desc: "Imposto reduzido para 5%" },
            { id: "d2", name: "Sede Tech", cost: 100000, level: 35, val: 6.0, salary: 15000, type: "profit", desc: "Lucro multiplicado por 6x" },
            { id: "ai", name: "IA Neural", cost: 300000, level: 45, val: 200, salary: 40000, type: "cap", desc: "+200 Capacidade" }
        ];

        const CATEGORIES = ['gameplay', 'graphics', 'story', 'optimization'];

        function showTab(id) {
            document.querySelectorAll('.tab-content, .tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('btn-' + id).classList.add('active');
        }

        function updateUI() {
            document.getElementById('money').innerText = Math.floor(game.money).toLocaleString();
            document.getElementById('dayCount').innerText = game.day;
            document.getElementById('level').innerText = game.level;
            document.getElementById('hypeTag').innerText = game.currentHype.toUpperCase();
            
            // XP
            document.getElementById('xpText').innerText = `${Math.floor(game.xp)} / ${game.xpNeeded}`;
            document.getElementById('xpBar').style.width = (game.xp / game.xpNeeded * 100) + "%";

            // Capacidade
            let bCap = 0;
            UPGRADES.filter(u => game.inventory.includes(u.id) && u.type === "cap").forEach(u => bCap += u.val);
            const max = 20 + (game.level * 5) + bCap;
            const current = Object.values(game.stats).reduce((a, b) => a + b, 0);
            
            document.getElementById('currentPoints').innerText = current;
            document.getElementById('maxPoints').innerText = max;
            document.getElementById('publishBtn').disabled = current === 0;

            // QA
            document.getElementById('qaBtn').style.display = game.level >= 10 ? 'block' : 'none';

            renderAttributes(max, current);
            renderUpgrades();
            localStorage.setItem('DevZero_Final_Master', JSON.stringify(game));
        }

        function renderAttributes(max, current) {
            document.getElementById('attrContainer').innerHTML = CATEGORIES.map(cat => `
                <div class="attr-card ${cat === game.currentHype ? 'is-hype' : ''}">
                    <div class="attr-info">${cat.toUpperCase()} <span>${game.stats[cat]} ${cat === game.currentHype ? 'ðŸ”¥' : ''}</span></div>
                    <div class="btn-row">
                        <button onclick="mod('${cat}', 1, ${max}, ${current})">+1</button>
                        <button onclick="mod('${cat}', 10, ${max}, ${current})">+10</button>
                    </div>
                </div>
            `).join('');
        }

        function renderUpgrades() {
            document.getElementById('upgradeList').innerHTML = UPGRADES.map(u => {
                const owned = game.inventory.includes(u.id);
                return `
                <div class="upgrade-item">
                    <div class="up-text"><b>${u.name}</b><small>${u.desc} | ManutenÃ§Ã£o: $${u.salary}</small></div>
                    <button class="buy-btn" onclick="buy('${u.id}', ${u.cost})" ${owned || game.level < u.level ? 'disabled' : ''}>
                        ${owned ? 'ATIVO' : '$' + u.cost.toLocaleString()}
                    </button>
                </div>`;
            }).join('');
        }

        function mod(k, v, m, c) { if(c + v <= m) game.stats[k] += v; updateUI(); }
        function buy(id, cost) { if(game.money >= cost) { game.money -= cost; game.inventory.push(id); updateUI(); } }

        function publishGame() {
            const vals = Object.values(game.stats);
            const total = vals.reduce((a, b) => a + b, 0);
            const avg = total / 4;
            
            // EquilÃ­brio: se um atributo tiver menos de 45% da mÃ©dia, perde lucro.
            let penalty = 1.0;
            vals.forEach(v => { if(v < avg * 0.45) penalty -= 0.25; });
            
            let mMult = 1.0;
            UPGRADES.filter(u => game.inventory.includes(u.id) && u.type === "profit").forEach(u => mMult = Math.max(mMult, u.val));

            const isHype = (game.stats[game.currentHype] / total) > 0.4;
            const hypeMult = isHype ? 1.8 : 1.0;

            const profit = Math.floor((total * 30) * Math.max(0.1, penalty) * hypeMult * mMult);
            const launchCost = 50 + (total * 3);
            
            game.money += (profit - launchCost);
            
            // Log do Feed
            const log = document.getElementById('gameLog');
            const item = document.createElement('div');
            item.className = "log-item";
            item.innerHTML = `<span>Jogo Dia ${game.day}</span> <b>+$${profit.toLocaleString()}</b>`;
            log.prepend(item);

            // Turno
            game.day++;
            game.currentHype = CATEGORIES[Math.floor(Math.random() * 4)];
            game.stats = { gameplay: 0, graphics: 0, story: 0, optimization: 0 };
            
            let xpMult = game.inventory.includes("cafe") ? 1.3 : 1.0;
            gainXP(total * 4 * xpMult);

            if(game.day > 10) showBills();
            else updateUI();
        }

        function showBills() {
            let fixed = 500;
            let salaries = 0;
            UPGRADES.filter(u => game.inventory.includes(u.id)).forEach(u => salaries += u.salary);
            let rate = game.inventory.includes("tax") ? 0.05 : 0.15;
            let taxes = Math.floor(Math.max(0, game.money * rate));

            const total = fixed + salaries + taxes;
            document.getElementById('billDetails').innerHTML = `
                Fixo (Vida): -$${fixed}<br>
                SalÃ¡rios: -$${salaries}<br>
                Impostos (${rate*100}%): -$${taxes}<br>
                <hr><b>TOTAL: -$${total}</b>
            `;
            document.getElementById('billModal').style.display = 'block';
            game.pendingBills = total;
        }

        function payBills() {
            game.money -= game.pendingBills;
            game.day = 1;
            document.getElementById('billModal').style.display = 'none';
            if(game.money < -1500) { alert("FALÃŠNCIA TOTAL! Seu estÃºdio fechou."); resetGame(true); }
            updateUI();
        }

        function gainXP(v) {
            game.xp += v;
            while(game.xp >= game.xpNeeded && game.level < 50) {
                game.xp -= game.xpNeeded; game.level++; game.xpNeeded = Math.floor(game.xpNeeded * 1.55);
            }
        }

        function runQA() {
            const total = Object.values(game.stats).reduce((a, b) => a + b, 0);
            const avg = total / 4;
            let bad = false;
            Object.values(game.stats).forEach(v => { if(v < avg * 0.45) bad = true; });
            
            let res = bad ? "ðŸš¨ DESEQUILÃBRIO DETECTADO!" : "âœ¨ ESTRUTURA PERFEITA!";
            if(game.level >= 30) {
                let low = CATEGORIES.reduce((a, b) => game.stats[a] < game.stats[b] ? a : b);
                res += `<br>SugestÃ£o: Foque em ${low.toUpperCase()}`;
            }
            document.getElementById('qaResult').innerHTML = res;
        }

        function resetGame(f = false) { if(f || confirm("Zerar tudo?")) { localStorage.clear(); location.reload(); } }

        window.onload = () => {
            const saved = localStorage.getItem('DevZero_Final_Master');
            if(saved) game = JSON.parse(saved);
            updateUI();
        };
    </script>
</body>
</html>
